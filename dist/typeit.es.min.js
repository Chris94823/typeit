//
// TypeIt by Alex MacArthur
// https://typeitjs.com
//
const e={breakLines:!0,cursor:!0,cursorChar:"|",cursorSpeed:1e3,deleteSpeed:null,html:!0,lifeLike:!0,loop:!1,loopDelay:750,nextStringDelay:750,speed:100,startDelay:250,startDelete:!1,strings:[],waitUntilVisible:!1,beforeString:()=>{},afterString:()=>{},beforeStep:()=>{},afterStep:()=>{},afterComplete:()=>{}};var t=e=>e.map((e=>(void 0===e[1]&&e.push(null),void 0===e[2]&&e.push({}),e))),n=(e,t)=>Object.assign({},e,t);const r=function(e){this.insert=function(e,t){r.splice(e,0,t)},this.add=function(e,a=!1){return e=t(e).map((e=>(e[2]=n(e[2],{id:i}),i++,e))),r=a?e.concat(r):r.concat(e),this},this.set=function(e,t){r[e]=t},this.reset=function(){r=r.map((e=>(e[2].executed=!1,e)))},this.getItems=function(){return r=t(r),r.filter((e=>!e[2].executed))},this.setMeta=function(e,t){let i=r.findIndex((t=>t[2].id===e));r[i][2]=n(r[i][2],t)};let r=[],i=0;this.add(e)};var i=e=>Array.from(e),a=e=>{let t=document.implementation.createHTMLDocument("");return t.body.innerHTML=e,t.body};const l=(e,t=null,n=!1)=>{let r=i(e.childNodes).map((e=>{return 3===(t=e).nodeType||"BR"===t.tagName?e:l(e);var t})).flat();return t&&(r=r.filter((e=>!t.contains(e)))),n?r.reverse():r};var o=e=>"BODY"===e.tagName;const s=(e,t=null)=>{let n=e instanceof HTMLElement;return{node:t,isTopLevelText:(!t||o(t.parentNode))&&!n,isHTMLElement:n,content:e}};function u(e){let t=a(e);return l(t).map((e=>e.nodeValue?i(e.nodeValue).map((t=>s(t,e))):s(e))).flat()}function d(e,t=!0){return t?u(e):i(e).map((e=>s(e)))}var c=e=>document.createElement(e),f=(e,t="")=>{let n=c("style");n.id=t,n.appendChild(document.createTextNode(e)),document.head.appendChild(n)},h=e=>Array.isArray(e),p=e=>(h(e)||(e=[e/2,e/2]),e),m=(e,t)=>Math.abs(Math.random()*(e+t-(e-t))+(e-t));function y(e,t,n){let r=(t=null!==t?t:e/3)/2;return n?[m(e,e/2),m(t,r)]:[e,t]}var g=e=>"value"in e;const v=(e,t)=>{let n=t.querySelectorAll("*");return[t].concat(i(n).reverse()).find((t=>t.cloneNode().outerHTML===e.outerHTML))};var b=(e,t,n=null,r)=>{let i=t.isHTMLElement,a=i?t.content:document.createTextNode(t.content);if(g(e))return void(e.value=`${e.value}${t.content}`);if(!t.isTopLevelText&&!i){let r=t.node.parentNode,i=v(r.cloneNode(),e);if(((e,t)=>{if(!e)return!1;let n=e.nextSibling;return!n||n.isEqualNode(t)})(i,n))e=i;else if(a=r.cloneNode(),a.innerText=t.content,!o(r.parentNode)){let t=r.parentNode,n=t.cloneNode(),i=v(n,e);for(;!i&&!o(t);)n.innerHTML=a.outerHTML,a=n,n=t.parentNode.cloneNode(),t=t.parentNode,i=v(n,e);e=i||e}}let s=l(e,n,!0)[r-1],u=s?s.parentNode:e;u.insertBefore(a,u.contains(n)?n:null)};const S=(e,t)=>(e[2]=n(e[2],t)||t,e);var w=(e,t)=>h(e[0])?e.map((e=>S(e,t))):S(e,t),T=(e,t,n={},r=!1)=>{let i=!h(e);const a=i?new Array(e).fill(0):e;return a.map(((e,l)=>{if(i)return t;let o=[t,e,n];return r&&(0===l&&(o=w(o,{isFirst:!0})),l+1===a.length&&(o=w(o,{isLast:!0}))),o}))},N=e=>e&&e.remove();var L=(e,t,n)=>{let r,i="string"==typeof e,a=!1,l=-1*e;return i&&(r="END"===e.toUpperCase(),l=r?-1:1,a=r?t+l>0:t+l<n.length),{isString:i,numberOfSteps:l,canKeepMoving:a}},M=e=>{let t=["font","lineHeight","color"],n=c("SPAN"),r=(i=e,window.getComputedStyle(i,null));var i;for(let e in r)t.indexOf(e)>-1&&r[e]&&(n.style[e]=r[e]);return n.style.cssText};function x(t,o={}){const m=(e,t)=>(j.add(e),((e={})=>{let t=e.delay;t&&j.add([[H,t]])})(t),this),v=(e={})=>[[A,e,{force:!0}],[A,F,{force:!0}]],S=()=>I?i(B.value):l(B,Y,!0),w=(e,t=1)=>{let n=F.nextStringDelay;j.insert(e,[H,n[0]]),j.insert(e+t+1,[H,n[1]])},x=e=>{Y&&(Y.classList.toggle("disabled",e),Y.classList.toggle("with-delay",!e))},E=async(e,t)=>{q.push(setTimeout(e,t))},D=async()=>{U.started=!0;let e,t=j.getItems();try{for(let n=0;n<t.length;n++){if(U.frozen||U.destroyed)throw"";let r=t[n],i=r[2];e=[r,this],i.freezeCursor&&x(!0),R=y(F.speed,F.deleteSpeed,F.lifeLike),i?.isFirst&&await F.beforeString(...e),await F.beforeStep(...e),await r[0].call(this,r[1],i),r[2]?.isLast&&await F.afterString(...e),await F.afterStep(...e),j.setMeta(i.id,{executed:!0}),x(!1)}if(U.completed=!0,await F.afterComplete(...e),!F.loop)throw"";let n=F.loopDelay;E((async()=>{await(async e=>{P&&await C(P),j.reset(),j.set(0,[H,e]),await z(!0)})(n[0]),D()}),n[1])}catch(e){}return this},H=(e=0)=>new Promise((t=>{E((()=>t()),e)})),C=e=>{let t=S(),n=L(e,P,t);return P+=n.numberOfSteps,new Promise((e=>{E((async()=>(((e,t,n,r)=>{if(!n)return;let i=r;i=i>t.length?t.length:i;let a=t[i-1];(e=a?a.parentNode:e).insertBefore(n,a||null)})(B,S(),Y,P),n.isString&&n.canKeepMoving&&await C(n.numberOfSteps>0?"START":"END"),e())),R[0])}))},$=e=>new Promise((t=>{E((()=>(b(B,e,Y,P),t())),R[0])})),A=async e=>{F=n(F,e)},k=async()=>{I?B.value="":S().forEach((e=>{N(e)}))},z=e=>(e=!0===e,new Promise((t=>{E((async()=>{let n=S();return n.length&&(I?B.value=B.value.slice(0,-1):N(n[P])),B.querySelectorAll("*").forEach((e=>{if(!e.innerHTML&&"BR"!==e.tagName){let t=e;for(;1===t.parentElement.childNodes.length&&t.parentElement.childNodes[0].isEqualNode(t);)t=t.parentElement;N(t)}})),e&&n.length-1>0?(await z(!0),t()):t()}),R[1])})));this.break=function(e){return m([[$,s(c("BR"))]],e)},this.delete=function(e,t){let n=v(t);return m([n[0],...[...Array(Math.abs(e)||1)].fill(null).map((()=>[z,!e,V])),n[1]],t)},this.empty=function(e={}){return m([[k]],e)},this.exec=function(e,t){let n=v(t);return m([n[0],[e,null],n[1]],t)},this.move=function(e,t){let n=L(e,P,S()),r=v(t),i=n.isString?e:Math.sign(e);return m([r[0],...[...Array(Math.abs(e)||1)].fill(null).map((()=>[C,i,V])),r[1]],t)},this.options=function(e){return m([[A,e]],e)},this.pause=function(e,t){return m([[H,e]],t)},this.type=function(e,t){let n=v(t),r=d(e,F.html),i=[n[0],...T(r,$,V,!0),n[1]];return m(i,t)},this.is=function(e){return U[e]},this.destroy=function(e=!0){q.forEach((e=>{clearTimeout(e)})),q=[],e&&N(Y),U.destroyed=!0},this.freeze=function(){U.frozen=!0},this.unfreeze=function(){U.frozen=!1,D()},this.reset=function(){!this.is("destroyed")&&this.destroy(),j.reset(),P=0;for(let e in U)U[e]=!1;return I?B.value="":B.innerHTML="",this},this.go=function(){return U.started?this:((async()=>{if(!Y)return;let e=`[data-typeit-id='${K}'] .ti-cursor`;f(`@keyframes blink-${K} { 0% {opacity: 0} 49% {opacity: 0} 50% {opacity: 1} } ${e} { animation: blink-${K} ${F.cursorSpeed/1e3}s infinite; } ${e}.with-delay { animation-delay: 500ms; } ${e}.disabled { animation: none; }`,K),B.appendChild(Y),"loaded"===document.fonts.status||await document.fonts.ready;let t=Y.getBoundingClientRect().width/2;Y.style.margin=`0 -${t+2}px 0 -${t-2}px`})(),F.waitUntilVisible?(((e,t)=>{new IntersectionObserver(((n,r)=>{n.forEach((n=>{n.isIntersecting&&(t(),r.unobserve(e))}))}),{threshold:1}).observe(e)})(B,D.bind(this)),this):(D(),this))},this.getQueue=function(){return j},this.getOptions=function(){return F},this.getElement=function(){return B};let B="string"==typeof(O=t)?document.querySelector(O):O;var O;let I=g(B),R=[],q=[],P=0,V={freezeCursor:!0},U={started:!1,completed:!1,frozen:!1,destroyed:!1},F=n(e,o);F=n(F,{html:!I&&F.html,nextStringDelay:p(F.nextStringDelay),loopDelay:p(F.loopDelay)});let K=Math.random().toString().substring(2,9),j=new r([[H,F.startDelay]]);var Q;B.dataset.typeitId=K,f("[data-typeit-id]:before {content: '.'; display: inline-block; width: 0; visibility: hidden;}"),F.strings=(e=>{let t=B.innerHTML;return t?(B.innerHTML="",F.startDelete?(u(t).forEach((e=>{b(B,e,Y,P)})),j.add([z,!0]),w(1),e):[t.trim()].concat(e)):e})((Q=F.strings,h(Q)?Q:[Q]));let Y=(()=>{if(I||!F.cursor)return;let e=c("span");return e.innerHTML=a(F.cursorChar).innerHTML,e.className="ti-cursor",e.style.cssText=`display:inline;${M(B)}`,e})();F.strings.length&&(()=>{let e=F.strings.filter((e=>!!e));e.forEach(((t,n)=>{let r=d(t,F.html);j.add(T(r,$,V,!0));let i=j.getItems().length;if(n+1!==e.length){if(F.breakLines){let e=s(c("BR"));return j.add([[$,e,V]]),void w(i)}j.add(T(r,z,V)),w(i,t.length)}}))})()}export default x;
